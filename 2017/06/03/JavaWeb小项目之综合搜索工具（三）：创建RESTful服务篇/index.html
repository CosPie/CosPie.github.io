<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>thinker&#39;s blog | try to thinker,and to be it.</title>

  
  <meta name="author" content="thinker">
  

  
  <meta name="description" content="recorde my web life.">
  

  
  
  <meta name="keywords" content="">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  

  <meta property="og:site_name" content="thinker&#39;s blog"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="thinker&#39;s blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
</head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">thinker&#39;s blog</a>
    </h1>
    <p class="site-description">try to thinker,and to be it.</p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">主页</a></li>
      
        <li><a href="/archives">归档</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span></span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2017/06/03/JavaWeb小项目之综合搜索工具（三）：创建RESTful服务篇/" rel="bookmark">
        <time class="entry-date published" datetime="2017-06-03T08:46:57.440Z">
          2017-06-03
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <ol>
<li><p>使用前端的JQuery框架，发起Ajax 请求一个API，然后获得JSON数据，在前端处解析处理。（具体代码可以去 <a href="http://www.jianshu.com/p/2cc6acf04386" target="_blank" rel="external">JavaWeb小项目之综合搜索工具（一）：前端篇</a> 文章底部查看。）</p>
</li>
<li><p>这篇文章的目的就是构建一个API，此API的目的就是获得爬虫爬到的信息。</p>
</li>
<li><p>找了许多框架，根据综合分析之后呢，为了降低构建难度，还是选择了Jersey框架。</p>
</li>
</ol>
<hr>
<p>#什么是RESTful</p>
<blockquote>
<p><i>相关阅读:</i><br>网上说的较好的有这两篇，看完大概就差不多了<br><a href="https://sanwen8.cn/p/2ddcbVD.html" target="_blank" rel="external">深入浅出RESTful API设计，小白也能看懂</a><br><a href="http://www.ruanyifeng.com/blog/2014/05/restful_api.html" target="_blank" rel="external">这里有一篇阮大写的 RESTful API 设计指南</a></p>
</blockquote>
<p>我说下简单的见解，也就是服务器给出一个目标地址（以一个url链接充当的API），当你发送 GET/POST/…之类的请求到此链接（即API）时，服务器会监听此链接所接受到的任何请求，然后执行你所写的逻辑代码。其实也就是java Servlet的知识内容。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/4666195-9b42a629d12142a2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="来自知乎的回答.png"></p>
<p>#快速构建RESTful</p>
<blockquote>
<p><em>相关阅读</em><br>读完这三篇基本思路就清楚了<br><a href="http://blog.csdn.net/kkkloveyou/article/details/21391033" target="_blank" rel="external">用Jersey构建RESTful服务1–HelloWorld</a><br><a href="http://www.tuicool.com/articles/IfUb6vb" target="_blank" rel="external">使用<em>Jersey</em>创建RESTful服务 - 推酷</a><br><a href="http://www.jianshu.com/p/42a263d655c6" target="_blank" rel="external">IntelliJ 创建Tomcat + <em>Jersey</em> Restful 工程</a></p>
</blockquote>
<p>我使用IntelliJ 来构建的，其中碰到了一些坑，坑了一两天。差点吐血。</p>
<blockquote>
<p>第一个坑：IntelliJ 默认的RESTful工程模板创建后一旦修改就会报错</p>
</blockquote>
<p>使用IntelliJ直接创建的RESTful Web Service跑起来没问题，但是一旦使用了爬虫的方法就报错！！哪怕是把爬虫的相关代码全部删除之后，还原到之前能跑状态的代码，依旧报错啊，卧槽了。硬生生是Debug不知多少个小时，感谢下面这篇文章解决了我的问题。</p>
<p><em>[IntelliJ 创建Tomcat + </em>Jersey<em> Restful 工程](<a href="http://www.jianshu.com/p/42a263d655c6" target="_blank" rel="external">http://www.jianshu.com/p/42a263d655c6</a>)</em></p>
<blockquote>
<p>第二个坑：导入爬虫模块后，找不到该模块</p>
</blockquote>
<p>那是因为没有在Artifacts中把把项目依赖的lib发布到WEB-INFO/lib下<br><img src="http://upload-images.jianshu.io/upload_images/4666195-b4e494dee9217b55.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Artifacts_WEB-INF"></p>
<p>#本项目的依赖</p>
<blockquote>
<p>使用maven来解决项目依赖：</p>
</blockquote>
<p>pom.xml文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div class="line">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;</div><div class="line">         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class="line">         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;</div><div class="line">    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</div><div class="line"></div><div class="line">    &lt;groupId&gt;com.hjg.test&lt;/groupId&gt;</div><div class="line">    &lt;artifactId&gt;search_back_end&lt;/artifactId&gt;</div><div class="line">    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;</div><div class="line"></div><div class="line">    &lt;dependencies&gt;</div><div class="line">        &lt;dependency&gt;</div><div class="line">            &lt;groupId&gt;org.glassfish.jersey.containers&lt;/groupId&gt;</div><div class="line">            &lt;artifactId&gt;jersey-container-servlet&lt;/artifactId&gt;</div><div class="line">            &lt;version&gt;2.22.2&lt;/version&gt;</div><div class="line">        &lt;/dependency&gt;</div><div class="line"></div><div class="line">        &lt;dependency&gt;</div><div class="line">            &lt;groupId&gt;com.sun.jersey&lt;/groupId&gt;</div><div class="line">            &lt;artifactId&gt;jersey-json&lt;/artifactId&gt;</div><div class="line">            &lt;version&gt;1.18&lt;/version&gt;</div><div class="line">        &lt;/dependency&gt;</div><div class="line">    &lt;/dependencies&gt;</div><div class="line">    </div><div class="line">&lt;/project&gt;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>为Servlet程序注册入口</p>
</blockquote>
<p>web.xml<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</div><div class="line">&lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</div><div class="line">         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</div><div class="line">         xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot;</div><div class="line">         version=&quot;3.1&quot;&gt;</div><div class="line">    &lt;servlet&gt;</div><div class="line">        &lt;servlet-name&gt;JAX-RS Servlet&lt;/servlet-name&gt;</div><div class="line">        &lt;servlet-class&gt;org.glassfish.jersey.servlet.ServletContainer&lt;/servlet-class&gt;</div><div class="line">        &lt;init-param&gt;</div><div class="line">            &lt;!--&lt;param-name&gt;jersey.config.server.provider.packages&lt;/param-name&gt;--&gt;</div><div class="line">            &lt;!--&lt;param-value&gt;com.hjg.test&lt;/param-value&gt;--&gt;</div><div class="line"></div><div class="line">            &lt;param-name&gt;javax.ws.rs.Application&lt;/param-name&gt;</div><div class="line">            &lt;param-value&gt;com.hjg.test.RestApplication&lt;/param-value&gt;</div><div class="line">        &lt;/init-param&gt;</div><div class="line">        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;</div><div class="line">    &lt;/servlet&gt;</div><div class="line">    &lt;servlet-mapping&gt;</div><div class="line">        &lt;servlet-name&gt;JAX-RS Servlet&lt;/servlet-name&gt;</div><div class="line">        &lt;url-pattern&gt;/api/*&lt;/url-pattern&gt;</div><div class="line">    &lt;/servlet-mapping&gt;</div><div class="line">&lt;/web-app&gt;</div></pre></td></tr></table></figure></p>
<p>com.hjg.test下的RestApplication.java<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">package com.hjg.test;</div><div class="line"></div><div class="line"></div><div class="line">import org.codehaus.jackson.jaxrs.JacksonJsonProvider;</div><div class="line">import org.glassfish.jersey.server.ResourceConfig;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Created by thinkerer on 2017/3/29.</div><div class="line"> */</div><div class="line">public class RestApplication extends ResourceConfig&#123;</div><div class="line">    public RestApplication()&#123;</div><div class="line">        //服务类所在的包路径</div><div class="line">        packages(&quot;com.hjg.test.resources&quot;);</div><div class="line">        </div><div class="line">        //注册JSON转换器</div><div class="line">        register(JacksonJsonProvider.class);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>通过在<figure class="highlight plain"><figcaption><span>"com.hjg.test.resources"```下的```UserResource.java```来处理接收请求后的逻辑</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">处理的逻辑代码如下：</div></pre></td></tr></table></figure></p>
<pre><code>@GET
@Path(&quot;/getArticle/{search_param}&quot;)
@Produces(MediaType.APPLICATION_JSON)
public Link_Items getArticle(@PathParam(&quot;search_param&quot;) String search_param){
    Link_Items re=null;
    if (search_param==null||search_param==&quot;&quot;){
    //todo
    }else {
        testSplider a = new testSplider();
         re= a.getDatasByClass(search_param);
}
    return re;
    //此处框架会把此对象直接转为JSON对象传回前端
}
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">到这一步大致就已经解决了基本问题，我所做的API是:</div><div class="line">```http://localhost:8080/api/search/getArticle/```+```参数(搜索的内容)</div></pre></td></tr></table></figure>
<p>运行Tomcat，注意端口号是否被占用。</p>
<blockquote>
<p>项目完整代码：<br><a href="https://coding.net/u/thinker_er/p/JavaWebDemo_Search_DEMO/git" target="_blank" rel="external">https://coding.net/u/thinker_er/p/JavaWebDemo_Search_DEMO/git</a></p>
</blockquote>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    

    </div>

    
  </div>
</article>


    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2017 thinker
    
  </p>
</footer>
    
  </div>
</div>
</body>
</html>