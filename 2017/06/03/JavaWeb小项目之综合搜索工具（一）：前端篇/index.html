<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>thinker&#39;s blog | try to thinker,and to be it.</title>

  
  <meta name="author" content="thinker">
  

  
  <meta name="description" content="recorde my web life.">
  

  
  
  <meta name="keywords" content="">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  

  <meta property="og:site_name" content="thinker&#39;s blog"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="thinker&#39;s blog" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
</head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">thinker&#39;s blog</a>
    </h1>
    <p class="site-description">try to thinker,and to be it.</p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">主页</a></li>
      
        <li><a href="/archives">归档</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span></span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2017/06/03/JavaWeb小项目之综合搜索工具（一）：前端篇/" rel="bookmark">
        <time class="entry-date published" datetime="2017-06-03T08:46:57.480Z">
          2017-06-03
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <blockquote>
<p>  前言: 本项目是写一个类似于综合搜索一样的网页。<br>  输入一个关键词，然后把此关键词分发到各个搜索引擎之中获得结果，<br>  并将其在网页中显示出来。<br>  后台采用了Java语言来实现，本来用nodejs或python语言会很方便，但因为有个Java实训要做，反正语言只是工具，思路才是重点。<br>  主要是练习JavaWeb，所以前端篇会简要提一下，代码的下载放于文末。<br>  Ps:关于数据来源，权当是练手，所以目前这一个版本只采用了“百科名医”网站的站内搜索结果。</p>
</blockquote>
<h3 id="设计："><a href="#设计：" class="headerlink" title="设计："></a>设计：</h3><p>没有怎么特别设计，就瞎弄。<br>由于蓝色、绿色之类的安全色看的有点腻，遂用了一点少女心的渐变色。<br>配色丑不丑的话，个人主观性太强，我也是瞎设计，改了好几次，也就这样了。如果觉得难看可以自己改。</p>
<blockquote>
<p>  如果自己不会设计渐变，那么去哪找好看的渐变色？<br>  附上一家提供180种渐变配色灵感的网站： <a href="https://webgradients.com/" target="_blank" rel="external">https://webgradients.com/</a></p>
</blockquote>
<p>我用的是这个</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">html&#123;</div><div class="line">    background-image: linear-gradient(-20deg, #f794a4 0%, #fdd6bd 100%);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>然后最终成品的效果图如下：</p>
<p><img src="media/e4b58920dc79dd87ef8a0bb26d833b1e.png" alt="前端页面效果图.png"></p>
<p>前端页面效果图.png</p>
<p><img src="media/54fb05975d3669c3e0885a2a23da5da2.png" alt="搜索.png"></p>
<p>搜索.png</p>
<h1 id="前后端交互部分"><a href="#前后端交互部分" class="headerlink" title="前后端交互部分"></a>前后端交互部分</h1><p>这里是沟通前后端的桥梁与媒介，重点写一下：</p>
<blockquote>
<p>  1.事件监听</p>
</blockquote>
<p>监听Search按钮的点击事件，以及监听Input输入框有变化的时候，触发SendAjax</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">//按钮,搜索框的事件监听</div><div class="line">$(&quot;#btn_search&quot;).click(function()&#123;</div><div class="line">    sendAjax();</div><div class="line">&#125;);</div><div class="line"></div><div class="line">$(&quot;#input_search&quot;).on(&quot;input&quot;,function()&#123;</div><div class="line">    //监听input的值是否产生变化</div><div class="line">    //如果是使用了输入法，input的值会出现一个空格，会触发一次</div><div class="line">    //所以要在sendAjax()中加入检查</div><div class="line">    sendAjax();</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<blockquote>
<p>  2.sendAjax()</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">function sendAjax()&#123;</div><div class="line"></div><div class="line">    search_text=$(&quot;#input_search&quot;).val();</div><div class="line">    </div><div class="line">    //检查是否输入搜索内容</div><div class="line">    //如果是使用了输入法，input的值会出现一个空格，会触发一次</div><div class="line">    if(search_text==&quot;&quot;||search_text==&quot; &quot;)&#123;</div><div class="line"></div><div class="line">        console.log(&quot;enter value is null&quot;);</div><div class="line"></div><div class="line">    &#125;else&#123;</div><div class="line">        $.ajax(&#123;</div><div class="line">            type:&quot;GET&quot;,</div><div class="line">            dataType:&quot;json&quot;,</div><div class="line">            // 地址填上服务器的IP</div><div class="line">            url:&quot;http://localhost:8080/api/search/getArticle/&quot;+search_text,</div><div class="line">            beforeSend:function()&#123;</div><div class="line">                OpenAlertInfo(false);   //关闭错误提示</div><div class="line">                rmAlertNotFound();      //关闭上次未找到结果的提示</div><div class="line">                addLoadingAnim();       //加载Loading动画</div><div class="line">            &#125;,</div><div class="line">            success:function(data)&#123;</div><div class="line">                // console.log(data);</div><div class="line"></div><div class="line">                //////////////////////////</div><div class="line">                // 为了让结果更快显示，先添加后执行其他任务 //</div><div class="line">                //////////////////////////</div><div class="line">                </div><div class="line">                addResult_item(data);   //添加搜索结果到页面</div><div class="line">                rmLoadingAnim();        //移除Loading动画   </div><div class="line">                CheckHasResult();       //对结果检查，没有则显示“未找到结果”的提示</div><div class="line"></div><div class="line">            &#125;,</div><div class="line">            error:function(XMLHttpRequest, textStatus, errorThrown)&#123;</div><div class="line">                // 请求没有成功的处理</div><div class="line">                rmLoadingAnim();        //移除Loading动画</div><div class="line">                OpenAlertInfo(true);    //显示未连接到服务器的错误提示</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>  3.解析服务器返回来的JSON data数据</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">function addResult_item(data) &#123;</div><div class="line">    //添加动画效果，使得搜索框上移，出现分割线</div><div class="line">    moveSearchUp();</div><div class="line">    $(&quot;.divider&quot;).addClass(&quot;Anim_DownSlideUp&quot;);</div><div class="line"></div><div class="line">    //在显示新的结果之前，清空上次搜索结果</div><div class="line">    $(&quot;.result_group&quot;).empty();</div><div class="line"></div><div class="line">    // 对JSON数据进行遍历解析</div><div class="line">    var all_datas_JSON=data;</div><div class="line"></div><div class="line">    for(var bwk in all_datas_JSON)&#123;</div><div class="line"></div><div class="line">        // console.log(all_datas_JSON[bwk]);        //bwk是三个对象(baike_datas...) 的名字(string)</div><div class="line"></div><div class="line">        for(var element_i in all_datas_JSON[bwk])&#123;              //element_i是bwk对象中元素的名字</div><div class="line"></div><div class="line">            // console.log(all_datas_JSON[bwk][element_i]);         //返回一个Object(&quot;id&quot;,&quot;linkHref&quot;,&quot;linkText&quot;)</div><div class="line"></div><div class="line"></div><div class="line">            var linkText=all_datas_JSON[bwk][element_i].linkText;   //文章名称</div><div class="line">            var linkHref=all_datas_JSON[bwk][element_i].linkHref;   //文章链接</div><div class="line">            var summary=all_datas_JSON[bwk][element_i].summary;     //文章摘要</div><div class="line"></div><div class="line">            // 用Js动态生成结果，DOM的创建操作</div><div class="line">            $(&quot;.result_group&quot;).append([&quot;&lt;div class=\&quot;result_item\&quot;&gt;&quot;,</div><div class="line">            &quot;           &lt;div class=\&quot;item_header\&quot;&gt;&quot;,</div><div class="line">            &quot;               &lt;p class=\&quot;item_text\&quot;&gt;&lt;a href=&quot;+linkHref+&quot;&gt;&quot;+linkText+&quot;&lt;/a&gt;&lt;/p&gt;&quot;,</div><div class="line">            &quot;           &lt;/div&gt;&quot;,</div><div class="line">            &quot;           &lt;div class=\&quot;item_body\&quot;&gt;&quot;,</div><div class="line">            &quot;               &lt;p class=\&quot;item_text\&quot;&gt;&quot;+summary+&quot;&lt;/p&gt;&quot;,</div><div class="line">            &quot;           &lt;/div&gt;&quot;,</div><div class="line">            &quot;           &lt;div class=\&quot;item_footer\&quot;&gt;&quot;,</div><div class="line">            &quot;               &lt;p class=\&quot;item_text\&quot;&gt;&lt;/p&gt;&quot;,</div><div class="line">            &quot;           &lt;/div&gt;&quot;,</div><div class="line">            &quot;&lt;/div&gt;&quot;].join(&quot;&quot;));</div><div class="line"></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>使用Js来生成HTML DOM的话，手动加双引号简直反人类，你可以使用<br><a href="http://tool.chinaz.com/tools/jsformat.aspx" target="_blank" rel="external">站长工具-JS/HTML格式化</a></p>
<p>记得SublimeText也有这么个插件，不过名字我倒是忘了，自己上去找找</p>
<p>大概的坑就这么多。</p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    

    

    </div>

    
  </div>
</article>


    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2017 thinker
    
  </p>
</footer>
    
  </div>
</div>
</body>
</html>